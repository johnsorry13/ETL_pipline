## Проект представляeт из себя демонстрацию полного ETL pipline от сбора информации до предоставления отчета конечному пользователю (проект в стадии разработки, на текущий момент реализован Парсер и OLTP БД)
## Включает следующие технологии

* Парсер (реализован на языке Python)
* Транзакционная БД на PostgresSQL
* ClickHouse для DWH и аналитических запросов  
* Power BI для построения графиков и отчетности


## Парсер интернет-магазинов/веб-сайтов

Реализован многопоточный парсер с поддержкой двух режимов работы и гибкой конфигурацией через YAML
Предназначен для извлечения данных с сайтов любого типа — от статических HTML-страниц до динамических с рендерингом на JavaScript

### Ключевые особенности

#### Гибридная архитектура
- **Режим `https`**: Быстрый сбор данных через `requests + BeautifulSoup` для статических сайтов
- **Режим `browser`**: рендеринг страниц через **Playwright** для сайтов с динамической загрузкой контента
- Автоматическое переключение между режимами через конфигурацию

#### Работа с прокси реализована через отдельный класс ProxyManager 
- **Thread-safe `ProxyManager`** с круговым распределением (round-robin)
- Поддержка прокси с аутентификацией (login/password)
- Привязка прокси к каждому запросу с логированием источника для отладки

#### Многопоточность
- Парсер использует `ThreadPoolExcecutor` для многопоточной загрузки страниц, можно гибко изменять параметр `max_worker` через YAML файл
- Для экономии памяти и ресурсов на каждый поток выделяется по 1 экземпляру и далее работает только контекст. Реализовано с помощью `threading.Local()`
- Автоматическое высвобождение ресурсов после обработки кадого URL
  
#### Гибкая настройка через YAML и модульная архитектура
- Сбор осуществляется через `css селекторы`, `json script` если присутствует в коде
- Выбор движка для сбора настраивается через `source`
- Кол-во потоков регулируется через `max_workers`
- Методы `fetch` и `parse` разделены для упрощения отладки и обработки исключений

## Транзакционная OLTP реализована на PostgresSQL (наполнение осуществляется через данные Парсера + генерация тестовых данных через Faker и самописный класс TestDataGenerator)
### БД состоит из таблиц фактов и транзакционных таблиц
#### Таблицы справочников
- Магазины
- Склады
- Поставщики
- Справочник валют
- Справочник налоговых ставок
- Справочник категорий
- Справочник единиц хранения/продажи
- Работники
- Товары
- Конкуренты
- Справочник статусов документов
#### Таблицы фактов
Таблицы фактов разделены на 2 логические сущности, таблицу документов и детализацию по каждому документу
- Продажи документы
- Детализация продаж по каждому документу
- Закупки документы
- Детализация закупок по каждому документу
- Таблица актуальных остатков (хранит текущие данные по остаткам)
- История изменения остатков
- Актуальные текущие цены
- История изменения цен
- История цен конкурентов
#### Реализованы триггеры на автоматическое обновление updated_at
- 

